import{r as f,o as A,a as se,w as W,b as N,c as ie,d as U,e as k,f as F,g as M,F as j,h as v,i as I,m as ee,j as te,T as ce,k as x,l as V,n as ae,p as ue,q as K,s as g,t as G,_ as q,u as D,v as de,x as ve,y as fe,z as me,A as R,B as pe,C as ge,D as oe,E as he,G as we,H as ke,K as be}from"./index-zJCAEN_5.js";import{I as P}from"./iconify-BFlKhQe_.js";function O(o){const n=document.documentElement,t=()=>{n.classList.add(o)},l=()=>{n.classList.remove(o)};return{add:t,remove:l,toggle:a=>{a===void 0?n.classList.toggle(o):a?t():l()}}}function re(o,n){let t=null;return function(...l){t&&clearTimeout(t),t=setTimeout(()=>{o.apply(this,l)},n)}}function Te(o=10){const n=f(window.innerWidth),t=re(()=>{n.value=window.innerWidth},o);return A(()=>{t(),window.addEventListener("resize",t)}),se(()=>{window.removeEventListener("resize",t)}),n}const ne=N(!1);function Ce(){const o=f(!1),n=O("mobile"),t=O("desktop"),l=Te();return W(()=>{l.value<720?(o.value=!0,n.add(),t.remove()):(o.value=!1,n.remove(),t.add()),ne("window width: ",l.value),ne("device: ",o.value?"Mobile":"Desktop")}),o}function _e(o,n){const t=localStorage.getItem(o),l=f(t||n);ie(l,a=>{localStorage.setItem(o,a)},{deep:!0});const e=a=>{a.key===o&&a.newValue!==null&&(l.value=a.newValue)};return A(()=>{window.addEventListener("storage",e)}),U(()=>{window.removeEventListener("storage",e)}),l}const Le=N(!0),ye="theme",i={DARK:"dark",LIGHT:"light",AUTO:"auto"};function Re(){const o=_e(ye,i.AUTO),n=O(i.DARK),t=O(i.LIGHT),l=window.matchMedia("(prefers-color-scheme: dark)"),a=f(o.value===i.DARK||o.value===i.LIGHT?o.value:l.matches?i.DARK:i.LIGHT),y=k(()=>o.value),h=r=>{o.value===i.AUTO&&(Le(r),r.matches?a.value=i.DARK:a.value=i.LIGHT)},b=()=>{t.remove(),n.add()},m=()=>{n.remove(),t.add()},T=()=>{a.value===i.DARK?b():a.value===i.LIGHT&&m()};function c(r){if(r===void 0||r===i.AUTO){o.value=i.AUTO,l.matches?a.value=i.DARK:a.value=i.LIGHT;return}a.value=r,o.value=r}return W(()=>{T()}),A(()=>{T(),l.addEventListener("change",h)}),se(()=>{l.removeEventListener("change",h)}),{currentThemeMode:y,toggleTheme:c}}const Ee=F({__name:"Popover",props:{placement:{default:"bottom"},trigger:{default:"click"},offset:{default:16},gap:{default:16},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:n}){const t=f(null),l=f(null),e=o,a=n,y=f(!1),h=k({get(){return e.trigger==="manual"?!!e.modelValue:y.value},set(s){e.trigger==="manual"?a("update:modelValue",s):y.value=s}}),b=()=>{h.value=!0,ue(Q)},m=()=>{h.value=!1},T=()=>{h.value?m():b()};let c=null,r=null;const u=()=>{c&&clearTimeout(c),r&&clearTimeout(r),c=r=null},S=k(()=>{if(e.trigger==="hover")return{onMouseenter(){u(),c=window.setTimeout(b,100)},onMouseleave(){u(),r=window.setTimeout(m,100)}};if(e.trigger==="click")return{onClick(s){s.stopPropagation(),T()}}}),$=k(()=>({onMouseenter(){e.trigger!=="click"&&u()},onMouseleave(){e.trigger!=="click"&&(u(),r=window.setTimeout(m,100))}})),p=s=>{e.trigger==="click"&&(l.value?.contains(s.target)||m())},d=f(0),H=f(0),C=k(()=>({top:`${H.value}px`,left:`${d.value}px`})),Q=()=>{if(!t.value||!l.value){K("referenceRef: ",t.value),K("popoverRef: ",l.value);return}const s=t.value.getBoundingClientRect(),w=l.value.getBoundingClientRect(),B=window.innerWidth,z=window.innerHeight;let _=0,L=0;const X=E=>{if(s.left>=B/2){if(E+w.width>=B)return B-w.width-e.gap}else if(E<=0)return e.gap;return E},Z=E=>{if(s.height<=z/2){if(E<=0)return e.gap}else if(E+w.height>=z)return z-w.height-e.gap;return E};switch(e.placement){case"top":{_=s.left-(w.width-s.width)/2,_=X(_),L=s.top-w.height-e.offset;break}case"bottom":{_=s.left-(w.width-s.width)/2,_=X(_),L=s.bottom+e.offset;break}case"left":{L=s.top-(w.height-s.height)/2,L=Z(L),_=s.left-w.width-e.offset;break}case"right":{L=s.top-(w.height-s.height)/2,L=Z(L),_=s.left+s.width+e.offset;break}}H.value=L,d.value=_},Y=k(()=>{switch(e.placement){case"top":return{x:0,y:8};case"bottom":return{x:0,y:-8};case"left":return{x:8,y:0};case"right":return{x:-8,y:0};default:return{x:0,y:0}}}),J=re(Q,10);return A(()=>{window.addEventListener("click",p),window.addEventListener("resize",J)}),U(()=>{window.removeEventListener("click",p),window.removeEventListener("resize",J)}),(s,w)=>(g(),M(j,null,[v("span",ee({ref_key:"referenceRef",ref:t,class:"popover-reference"},S.value),[te(s.$slots,"reference",{},void 0)],16),(g(),I(ce,{to:"body"},[x(ae,{name:"popover"},{default:V(()=>[h.value?(g(),M("div",ee({key:0,ref_key:"popoverRef",ref:l,style:{"--enter-x":`${Y.value.x}px`,"--enter-y":`${Y.value.y}px`,...C.value},class:"popover-content"},$.value),[te(s.$slots,"default",{},void 0,!0)],16)):G("",!0)]),_:3})]))],64))}}),xe=q(Ee,[["__scopeId","data-v-660b3e78"]]),Ve=["onClick"],Ie=F({__name:"Selector",props:{items:{},modelValue:{},placement:{}},emits:["select"],setup(o,{emit:n}){const t=N(!0),l=o,e=f(!0),a=k(()=>l.placement==="column"?"mode-column":"mode-row"),y=n,h=c=>{t("select item"),y("select",c),e.value=!e.value},b=c=>l?.modelValue===c.value,m=f(null),T=c=>{if(!m.value)return;const r=m.value.$el||m.value;r&&!r.contains(c.target)&&(e.value=!0)};return A(()=>{t("selector props: ",l),t("selector collapsed: ",e.value),window.addEventListener("click",T)}),U(()=>{window.removeEventListener("click",T)}),(c,r)=>(g(),I(de,{ref_key:"itemsRef",ref:m,tag:"ul",name:"list",class:D(["selector-box",[a.value,{"is-collapsed":e.value}]])},{default:V(()=>[(g(!0),M(j,null,ve(o.items,u=>fe((g(),M("li",{key:u.value,onClick:S=>h(u),class:D(["selector-item",{selected:b(u)&&(o.placement===void 0||!e.value)}])},[u.icon!==null?(g(),I(R(P),{key:0,icon:u.icon,class:"global-icon"},null,8,["icon"])):G("",!0),me(" "+pe(u.label),1)],10,Ve)),[[ge,o.placement===void 0||o.modelValue===u.value||o.placement!==void 0&&!e.value]])),128))]),_:1},8,["class"]))}}),le=q(Ie,[["__scopeId","data-v-c7471e1b"]]),Me={class:"globalheader"},Ae={class:"globalnav"},Se={class:"globalnav-left"},De={class:"globalnav-right"},$e={class:"main"},He={key:0,class:"aside-theme-switch"},Ke=F({__name:"Home",setup(o){const n=Ce(),{currentThemeMode:t,toggleTheme:l}=Re(),e=f(n.value||!1),a=k(()=>({"mobile-mode":n.value,collapsed:e.value&&n.value,expand:!e.value&&n.value})),y=k(()=>({"desktop-mode":!n.value,collapsed:e.value&&!n.value,expand:!e.value&&!n.value})),h=k(()=>e.value?"solar:login-2-broken":"solar:logout-2-broken"),b=()=>{e.value=!e.value},m=k(()=>t.value===i.AUTO?"solar:stars-broken":t.value===i.DARK?"solar:moon-fog-broken":"solar:sun-fog-broken"),T=p=>{K("toggle theme: ",p),l(p.value)},c=[{icon:"solar:stars-broken",label:"Auto",value:"auto"},{icon:"solar:moon-fog-broken",label:"Dark",value:"dark"},{icon:"solar:sun-fog-broken",label:"Light",value:"light"}];W(()=>{K("collapsed: ",e.value)});const r=f(null),u=f(null),S=p=>{e.value||!n.value||!r.value||!u.value||!r.value.contains(p.target)&&u.value.contains(p.target)&&b()},$=p=>{we.push(p),n.value&&!e.value&&b()};return A(()=>{window.addEventListener("click",S)}),U(()=>{window.removeEventListener("click",S)}),(p,d)=>{const H=he("router-view");return g(),M(j,null,[v("header",Me,[v("nav",Ae,[v("section",Se,[v("span",{onClick:d[0]||(d[0]=C=>p.$router.push("/")),class:"globalnav-title"},"Hiki Niito's space")]),v("section",De,[R(n)?G("",!0):(g(),I(xe,{key:0,placement:"bottom",trigger:"hover"},{reference:V(()=>[x(R(P),{icon:m.value,class:"global-icon"},null,8,["icon"])]),default:V(()=>[d[5]||(d[5]=v("p",{style:{margin:"8px 0 16px 0","font-weight":"bold"}},"Apperance",-1)),x(le,{modelValue:R(t),"onUpdate:modelValue":d[1]||(d[1]=C=>oe(t)?t.value=C:null),onSelect:T,items:c},null,8,["modelValue"])]),_:1})),x(R(P),{onClick:b,icon:h.value,class:"global-icon"},null,8,["icon"])])])]),v("main",$e,[v("aside",{class:D(["aside",y.value])},[v("section",{ref_key:"asideContentRef",ref:r,class:D(["aside-content",a.value])},[v("ol",null,[v("li",{onClick:d[2]||(d[2]=C=>$("/404"))},"Connectivity Test"),v("li",{onClick:d[3]||(d[3]=C=>$("/konosuba"))},"konosuba")]),R(n)?(g(),M("div",He,[x(le,{placement:"column",modelValue:R(t),"onUpdate:modelValue":d[4]||(d[4]=C=>oe(t)?t.value=C:null),onSelect:T,items:c},null,8,["modelValue"])])):G("",!0)],2)],2),v("section",{ref_key:"mainContentRef",ref:u,class:D(["main-content",{blurred:R(n)&&!e.value}])},[x(H,null,{default:V(({Component:C})=>[x(ae,{mode:"out-in"},{default:V(()=>[(g(),I(be,null,[(g(),I(ke(C)))],1024))]),_:2},1024)]),_:1})],2)])],64)}}}),Ue=q(Ke,[["__scopeId","data-v-1f9c23fc"]]);export{Ue as default};
