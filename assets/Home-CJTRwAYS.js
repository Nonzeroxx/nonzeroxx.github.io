import{r as m,o as A,a as le,w as P,b as W,c as ie,d as O,e as b,f as N,g as M,F,h as v,i as I,m as Z,j as ee,T as ue,k as V,l as x,n as se,p as ce,q as H,s as p,t as K,_ as j,u as S,v as de,x as ve,y as me,z as fe,A as R,B as pe,C as ge,D as te,E as he,G as we,K as ke}from"./index-B1PAlEfI.js";import{I as z}from"./iconify-GY7xfPZg.js";function G(o){const n=document.documentElement,t=()=>{n.classList.add(o)},l=()=>{n.classList.remove(o)};return{add:t,remove:l,toggle:a=>{a===void 0?n.classList.toggle(o):a?t():l()}}}function ae(o,n){let t=null;return function(...l){t&&clearTimeout(t),t=setTimeout(()=>{o.apply(this,l)},n)}}function be(o=10){const n=m(window.innerWidth),t=ae(()=>{n.value=window.innerWidth},o);return A(()=>{t(),window.addEventListener("resize",t)}),le(()=>{window.removeEventListener("resize",t)}),n}const oe=W(!1);function Te(){const o=m(!1),n=G("mobile"),t=G("desktop"),l=be();return P(()=>{l.value<720?(o.value=!0,n.add(),t.remove()):(o.value=!1,n.remove(),t.add()),oe("window width: ",l.value),oe("device: ",o.value?"Mobile":"Desktop")}),o}function Ce(o,n){const t=localStorage.getItem(o),l=m(t||n);ie(l,a=>{localStorage.setItem(o,a)},{deep:!0});const e=a=>{a.key===o&&a.newValue!==null&&(l.value=a.newValue)};return A(()=>{window.addEventListener("storage",e)}),O(()=>{window.removeEventListener("storage",e)}),l}const Le=W(!0),_e="theme",i={DARK:"dark",LIGHT:"light",AUTO:"auto"};function ye(){const o=Ce(_e,i.AUTO),n=G(i.DARK),t=G(i.LIGHT),l=window.matchMedia("(prefers-color-scheme: dark)"),a=m(o.value===i.DARK||o.value===i.LIGHT?o.value:l.matches?i.DARK:i.LIGHT),y=b(()=>o.value),g=r=>{o.value===i.AUTO&&(Le(r),r.matches?a.value=i.DARK:a.value=i.LIGHT)},C=()=>{t.remove(),n.add()},f=()=>{n.remove(),t.add()},T=()=>{a.value===i.DARK?C():a.value===i.LIGHT&&f()};function u(r){if(r===void 0||r===i.AUTO){o.value=i.AUTO,l.matches?a.value=i.DARK:a.value=i.LIGHT;return}a.value=r,o.value=r}return P(()=>{T()}),A(()=>{T(),l.addEventListener("change",g)}),le(()=>{l.removeEventListener("change",g)}),{currentThemeMode:y,toggleTheme:u}}const Re=N({__name:"Popover",props:{placement:{default:"bottom"},trigger:{default:"click"},offset:{default:16},gap:{default:16},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:n}){const t=m(null),l=m(null),e=o,a=n,y=m(!1),g=b({get(){return e.trigger==="manual"?!!e.modelValue:y.value},set(s){e.trigger==="manual"?a("update:modelValue",s):y.value=s}}),C=()=>{g.value=!0,ce(q)},f=()=>{g.value=!1},T=()=>{g.value?f():C()};let u=null,r=null;const c=()=>{u&&clearTimeout(u),r&&clearTimeout(r),u=r=null},$=b(()=>{if(e.trigger==="hover")return{onMouseenter(){c(),u=window.setTimeout(C,100)},onMouseleave(){c(),r=window.setTimeout(f,100)}};if(e.trigger==="click")return{onClick(s){s.stopPropagation(),T()}}}),h=b(()=>({onMouseenter(){e.trigger!=="click"&&c()},onMouseleave(){e.trigger!=="click"&&(c(),r=window.setTimeout(f,100))}})),d=s=>{e.trigger==="click"&&(l.value?.contains(s.target)||f())},D=m(0),w=m(0),re=b(()=>({top:`${w.value}px`,left:`${D.value}px`})),q=()=>{if(!t.value||!l.value){H("referenceRef: ",t.value),H("popoverRef: ",l.value);return}const s=t.value.getBoundingClientRect(),k=l.value.getBoundingClientRect(),U=window.innerWidth,B=window.innerHeight;let L=0,_=0;const J=E=>{if(s.left>=U/2){if(E+k.width>=U)return U-k.width-e.gap}else if(E<=0)return e.gap;return E},X=E=>{if(s.height<=B/2){if(E<=0)return e.gap}else if(E+k.height>=B)return B-k.height-e.gap;return E};switch(e.placement){case"top":{L=s.left-(k.width-s.width)/2,L=J(L),_=s.top-k.height-e.offset;break}case"bottom":{L=s.left-(k.width-s.width)/2,L=J(L),_=s.bottom+e.offset;break}case"left":{_=s.top-(k.height-s.height)/2,_=X(_),L=s.left-k.width-e.offset;break}case"right":{_=s.top-(k.height-s.height)/2,_=X(_),L=s.left+s.width+e.offset;break}}w.value=_,D.value=L},Q=b(()=>{switch(e.placement){case"top":return{x:0,y:8};case"bottom":return{x:0,y:-8};case"left":return{x:8,y:0};case"right":return{x:-8,y:0};default:return{x:0,y:0}}}),Y=ae(q,10);return A(()=>{window.addEventListener("click",d),window.addEventListener("resize",Y)}),O(()=>{window.removeEventListener("click",d),window.removeEventListener("resize",Y)}),(s,k)=>(p(),M(F,null,[v("span",Z({ref_key:"referenceRef",ref:t,class:"popover-reference"},$.value),[ee(s.$slots,"reference",{},void 0)],16),(p(),I(ue,{to:"body"},[V(se,{name:"popover"},{default:x(()=>[g.value?(p(),M("div",Z({key:0,ref_key:"popoverRef",ref:l,style:{"--enter-x":`${Q.value.x}px`,"--enter-y":`${Q.value.y}px`,...re.value},class:"popover-content"},h.value),[ee(s.$slots,"default",{},void 0,!0)],16)):K("",!0)]),_:3})]))],64))}}),Ee=j(Re,[["__scopeId","data-v-660b3e78"]]),Ve=["onClick"],xe=N({__name:"Selector",props:{items:{},modelValue:{},placement:{}},emits:["select"],setup(o,{emit:n}){const t=W(!0),l=o,e=m(!0),a=b(()=>l.placement==="column"?"mode-column":"mode-row"),y=n,g=u=>{t("select item"),y("select",u),e.value=!e.value},C=u=>l?.modelValue===u.value,f=m(null),T=u=>{if(!f.value)return;const r=f.value.$el||f.value;r&&!r.contains(u.target)&&(e.value=!0)};return A(()=>{t("selector props: ",l),t("selector collapsed: ",e.value),window.addEventListener("click",T)}),O(()=>{window.removeEventListener("click",T)}),(u,r)=>(p(),I(de,{ref_key:"itemsRef",ref:f,tag:"ul",name:"list",class:S(["selector-box",[a.value,{"is-collapsed":e.value}]])},{default:x(()=>[(p(!0),M(F,null,ve(o.items,c=>me((p(),M("li",{key:c.value,onClick:$=>g(c),class:S(["selector-item",{selected:C(c)&&(o.placement===void 0||!e.value)}])},[c.icon!==null?(p(),I(R(z),{key:0,icon:c.icon,class:"global-icon"},null,8,["icon"])):K("",!0),fe(" "+pe(c.label),1)],10,Ve)),[[ge,o.placement===void 0||o.modelValue===c.value||o.placement!==void 0&&!e.value]])),128))]),_:1},8,["class"]))}}),ne=j(xe,[["__scopeId","data-v-c7471e1b"]]),Ie={class:"globalheader"},Me={class:"globalnav"},Ae={class:"globalnav-left"},$e={class:"globalnav-right"},Se={class:"main"},De={key:0,class:"aside-theme-switch"},He=N({__name:"Home",setup(o){const n=Te(),{currentThemeMode:t,toggleTheme:l}=ye(),e=m(n.value||!1),a=b(()=>({"mobile-mode":n.value,collapsed:e.value&&n.value,expand:!e.value&&n.value})),y=b(()=>({"desktop-mode":!n.value,collapsed:e.value&&!n.value,expand:!e.value&&!n.value})),g=b(()=>e.value?"solar:login-2-broken":"solar:logout-2-broken"),C=()=>{e.value=!e.value},f=b(()=>t.value===i.AUTO?"solar:stars-broken":t.value===i.DARK?"solar:moon-fog-broken":"solar:sun-fog-broken"),T=h=>{H("toggle theme: ",h),l(h.value)},u=[{icon:"solar:stars-broken",label:"Auto",value:"auto"},{icon:"solar:moon-fog-broken",label:"Dark",value:"dark"},{icon:"solar:sun-fog-broken",label:"Light",value:"light"}];P(()=>{H("collapsed: ",e.value)});const r=m(null),c=m(null),$=h=>{e.value||!n.value||!r.value||!c.value||!r.value.contains(h.target)&&c.value.contains(h.target)&&C()};return A(()=>{window.addEventListener("click",$)}),O(()=>{window.removeEventListener("click",$)}),(h,d)=>{const D=he("router-view");return p(),M(F,null,[v("header",Ie,[v("nav",Me,[v("section",Ae,[v("span",{onClick:d[0]||(d[0]=w=>h.$router.push("/")),class:"globalnav-title"},"Hiki Niito's space")]),v("section",$e,[R(n)?K("",!0):(p(),I(Ee,{key:0,placement:"bottom",trigger:"hover"},{reference:x(()=>[V(R(z),{icon:f.value,class:"global-icon"},null,8,["icon"])]),default:x(()=>[d[5]||(d[5]=v("p",{style:{margin:"8px 0 16px 0","font-weight":"bold"}},"Apperance",-1)),V(ne,{modelValue:R(t),"onUpdate:modelValue":d[1]||(d[1]=w=>te(t)?t.value=w:null),onSelect:T,items:u},null,8,["modelValue"])]),_:1})),V(R(z),{onClick:C,icon:g.value,class:"global-icon"},null,8,["icon"])])])]),v("main",Se,[v("aside",{class:S(["aside",y.value])},[v("section",{ref_key:"asideContentRef",ref:r,class:S(["aside-content",a.value])},[v("ol",null,[v("li",{onClick:d[2]||(d[2]=w=>h.$router.push("/404"))},"Connectivity Test"),v("li",{onClick:d[3]||(d[3]=w=>h.$router.push("/konosuba"))},"konosuba")]),R(n)?(p(),M("div",De,[V(ne,{placement:"column",modelValue:R(t),"onUpdate:modelValue":d[4]||(d[4]=w=>te(t)?t.value=w:null),onSelect:T,items:u},null,8,["modelValue"])])):K("",!0)],2)],2),v("section",{ref_key:"mainContentRef",ref:c,class:S(["main-content",{blurred:R(n)&&!e.value}])},[V(D,null,{default:x(({Component:w})=>[V(se,{mode:"out-in"},{default:x(()=>[(p(),I(ke,null,[(p(),I(we(w)))],1024))]),_:2},1024)]),_:1})],2)])],64)}}}),Oe=j(He,[["__scopeId","data-v-9849379e"]]);export{Oe as default};
